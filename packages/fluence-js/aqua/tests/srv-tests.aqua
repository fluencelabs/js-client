module Export

import Srv from "../src/single-module-srv.aqua"
export happy_path, service_removed

service Greeting("greeting"):
    greeting(name: string) -> string

func happy_path(file_path: string) -> string:
    wasm <- Srv.read_file(file_path)
    id <- Srv.create(wasm)
    Greeting id
    <- Greeting.greeting("test")

func service_removed(file_path: string) -> string:
    wasm <- Srv.read_file(file_path)
    id <- Srv.create(wasm)
    Greeting id
    Srv.remove(id)
    try:
        dontcare <- Greeting.greeting("test")
    catch e: 
        <- e.message
    
